databaseChangeLog:
  - changeSet:
      id: create-queue-token-table
      author: zamir
      changes:
        - createTable:
            tableName: token
            columns:
              - column:
                  name: ID
                  type: varchar(36)
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: VERSION
                  type: INT
                  defaultValueNumeric: 0
              - column:
                  name: CATEGORY_WISE_TOKEN_SEQ_NO
                  type: INT
              - column:
                  name: SVC_SEQ_NO_IN_A_TOKEN
                  type: INT
              - column:
                  name: STATE
                  type: INT
                  remarks: 0 - not served, 1 - service started (in-progress), 3 - service served, 4 service canceled
                  constraints:
                    nullable: false
              - column:
                  name: TOKEN_PREFIX
                  type: varchar(3)
              - column:
                  name: TOKEN_NO_INT
                  type: INT
              - column:
                  name: TOKEN_NO_STR
                  type: varchar(10)
              - column:
                  name: TOKEN_ISSUE_DATE
                  type: datetime
              - column:
                  name: TKIS_ID
                  type: varchar(36)
              - column:
                  name: SC_ID
                  type: varchar(36)
              - column:
                  name: SDC_ID
                  type: varchar(36)
              - column:
                  name: SDC_USER_ID
                  type: varchar(36)
              - column:
                  name: LANG_ID
                  type: INT
              - column:
                  name: TOKEN_PRIORITY
                  type: INT
              - column:
                  name: SERVICE_ID
                  type: varchar(36)
                  constraints:
                    foreignKeyName: fk_service_id
                    deleteCascade: true
                    references: service(ID)
              - column:
                  name: SVC_PRIORITY
                  type: INT
              - column:
                  name: NO_OF_TRY
                  type: INT
              - column:
                  name: NEXT_TRY_TIME
                  type: datetime
              - column:
                  name: HAS_ANY_FOLLOWUP_SVC
                  type: boolean
              - column:
                  name: IS_THIS_A_FOLLOWUP_SVC
                  type: boolean
              - column:
                  name: TKIS_PAGE_NAVIGATION
                  type: varchar(36)
              - column:
                  name: ESTIMATED_WAIT_TIME_IN_MIN
                  type: INT
              - column:
                  name: CUST_IDENTIFICATION_TYPE
                  type: varchar(36)
                  remarks: NID,BANK_AC_NO,CARD_NO
              - column:
                  name: CUST_IDENTIFICATION_NUMBER
                  type: varchar(36)
              - column:
                  name: CUSTOMER_MOB_NUMBER
                  type: varchar(36)
              - column:
                  name: REMARKS
                  type: varchar(256)
              - column:
                  name: META_DATA
                  type: TEXT
              - column:
                  name: CREATED
                  type: datetime
                  constraints:
                    nullable: false
              - column:
                  name: CREATED_BY
                  type: varchar(36)
                  constraints:
                    nullable: false
              - column:
                  name: MODIFIED
                  type: datetime
                  constraints:
                    nullable: false
              - column:
                  name: MODIFIED_BY
                  type: varchar(36)
                  constraints:
                    nullable: false
        - createIndex:
            indexName: token_token_issue_date_idx
            tableName: token
            columns:
              - column:
                  name: TOKEN_ISSUE_DATE